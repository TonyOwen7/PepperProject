<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control your Pepper - Robot Control</title>
    <link rel="icon" href="../static/images/Pepper.png" type="image/png">
    <link rel="stylesheet" href="../static/css/control_style.css">
</head>
<body>
    <div class="bg_img"></div>
    <div class="control">
        <h1>Control Your Pepper Robot</h1>

        <!-- Toggle for Wiki Mode -->
        <label class="switch">
            <input type="checkbox" id="wiki-toggle">
            <span class="slider round"></span>
        </label>
        <p>Wiki Pepper Mode</p>

        <!-- Joystick Interface -->
        <div class="joystick-container">
            <div class="joystick-row">
                <button onclick="sendCommand('Avancer vers la gauche')" class="joystick-button">‚Üñ</button>
                <button onclick="sendCommand('Avancer')" class="joystick-button">‚Üë</button>
                <button onclick="sendCommand('Avancer vers la droite')" class="joystick-button">‚Üó</button>
            </div>
            <div class="joystick-row">
                <button onclick="sendCommand('Tourner √† gauche')" class="joystick-button">‚Üê</button>
                <button onclick="sendCommand('stop')" class="joystick-button">‚èπÔ∏è</button>
                <button onclick="sendCommand('Tourner √† droite')" class="joystick-button">‚Üí</button>
            </div>
            <div class="joystick-row">
                <button onclick="sendCommand('Reculer vers la gauche')" class="joystick-button">‚Üô</button>
                <button onclick="sendCommand('Reculer')" class="joystick-button">‚Üì</button>
                <button onclick="sendCommand('Reculer vers la droite')" class="joystick-button">‚Üò</button>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button onclick="sendCommand('Calibrer cam√©ra')" class="action-button">üì∑</button>
            <button onclick="sendCommand('Tourner sur soi-m√™me vers la gauche')" class="action-button">‚Ü∫</button>
            <button onclick="sendCommand('Tourner sur soi-m√™me vers la droite')" class="action-button">‚Üª</button>
            <button onclick="sendCommand('Tour complet vers la gauche')" class="action-button">‚Ü∫ 360¬∞</button>
            <button onclick="sendCommand('Tour complet vers la droite')" class="action-button">‚Üª 360¬∞</button>
        </div>
    </div>
    
    <script src="../static/js/control_script.js"></script>
    <script>
        // Toggle Wiki Mode
        document.getElementById("wiki-toggle").addEventListener("change", function() {
            const isEnabled = this.checked;
            fetch("/set_wiki_mode", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ wiki_mode: isEnabled })
            }).then(response => {
                if (response.ok) {
                    console.log(`Wiki Pepper Mode ${isEnabled ? 'enabled' : 'disabled'}`);
                }
            }).catch(error => console.error('Error:', error));
        });

        // Function to send command to Flask backend
        function sendCommand(commandName) {
            fetch("/command", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ command: commandName })
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    alert(data.message);
                } else if (data.error) {
                    alert(data.error);
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
